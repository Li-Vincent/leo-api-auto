webpackJsonp([27],{FEFL:function(e,t){},fTqM:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("woOf"),a=r.n(o),i=r("cKc3");var s=r("H9AI"),n=r("pR/e"),l=r("Tr1n"),m={name:"CronJobList",data:function(){var e=this;return{filters:{name:""},testSuites:[],mailGroupList:[],TriggerTypes:[{name:"触发间隔",value:"interval"},{name:"具体日期",value:"date"}],size:10,skip:0,sortBy:"createAt",order:"descending",pageNum:1,totalNum:0,selects:[],delLoading:!1,disDel:!0,TestStatus:!1,listLoading:!1,statusChangeLoading:!1,cronJobs:[],testEnvs:[],titleMap:{add:"新增定时任务",edit:"编辑定时任务"},dialogStatus:"",formVisible:!1,editLoading:!1,formRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],testSuiteIdList:[{required:!0,message:"请选择测试用例组",trigger:"blur"}],testEnvId:[{required:!0,message:"请选择测试环境",trigger:"blur"}],triggerType:[{required:!0,message:"请选择触发类型",trigger:"blur"}],interval:[{required:!1,message:"请输入触发间隔",trigger:"blur"},{validator:function(t,r,o){""!==r&&null!==r&&void 0!==r?r>=60?o():(o(new Error("请输入大于或等于一分钟的触发间隔！")),e.$message.warning({message:"请输入大于或等于一分钟的触发间隔！",center:!0})):o()},trigger:"blur"}],runDate:[{required:!1,message:"请输入触发时间",trigger:"blur"}],description:[{required:!1,message:"请输入版本号",trigger:"blur"},{max:1024,message:"不能超过1024个字符",trigger:"blur"}]},form:{name:"",testSuiteIdList:[],includeForbidden:!1,testEnvId:"",enableWXWorkNotify:!1,WXWorkAPIKey:"",WXWorkMentionMobileList:[],alwaysWXWorkNotify:!1,enableDingTalkNotify:!1,DingTalkAccessToken:"",DingTalkAtMobiles:[],DingTalkSecret:"",alwaysDingTalkNotify:!1,alarmMailGroupList:[],alwaysSendMail:!1,triggerType:"",interval:0,runDate:"",description:""},initForm:{name:"",testSuiteIdList:[],includeForbidden:!1,testEnvId:"",enableWXWorkNotify:!1,WXWorkAPIKey:"",WXWorkMentionMobileList:[],alwaysWXWorkNotify:!1,enableDingTalkNotify:!1,DingTalkAccessToken:"",DingTalkAtMobiles:[],DingTalkSecret:"",alwaysDingTalkNotify:!1,alarmMailGroupList:[],alwaysSendMail:!1,triggerType:"",interval:0,runDate:"",description:""},pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}}}},methods:{getTestEnvList:function(){var e=this,t=this;Object(s.b)({status:!0},{}).then(function(r){var o=r.status,a=r.data;"ok"===o?e.testEnvs=a.rows:t.$message.error({message:a,center:!0})}).catch(function(e){t.$message.error({message:"暂时无法获取环境列表，请稍后刷新重试~",center:!0})})},checkActiveTestEnv:function(){this.testEnvs.length<1&&this.$message.warning({message:"未找到「启用的测试环境」哦, 请前往「环境配置」进行设置",center:!0})},getMailGroupList:function(){this.listLoading=!0;var e=this;Object(l.c)({status:!0}).then(function(t){var r=t.status,o=t.data;e.listLoading=!1,"ok"===r?(e.totalNum=o.totalNum,e.mailGroupList=o.rows):e.$message.error({message:o,center:!0})}).catch(function(t){e.$message.error({message:"邮件组列表获取失败，请稍后刷新重试哦~",center:!0}),e.listLoading=!1})},checkActiveMail:function(){this.mailGroupList.length<1&&this.$message.warning({message:"未找到「启用的邮件组」哦, 请通知管理员前往「邮件配置」进行设置",center:!0})},getTestSuiteList:function(){var e=this,t={status:!0,projectId:e.$route.params.project_id};this.listLoading=!0;Object(n.d)(e.$route.params.project_id,t,{}).then(function(t){e.listLoading=!1;var r=t.status,o=t.data;"ok"===r?(e.testSuites=o.rows,e.totalNum=o.totalNum):e.$message.error({message:o,center:!0})}).catch(function(t){e.$message.error({message:"用例列表获取失败，请稍后刷新重试哦~",center:!0}),e.listLoading=!1})},checkActiveTestSuite:function(){this.testSuites.length<1&&this.$message.warning({message:"未找到「启用的测试用例组」哦, 请前往「自动化测试」进行设置",center:!0})},queryCronJobs:function(e){var t=this;""!==t.filters.name.trim()&&(e.name=t.filters.name.trim());(function(e,t,r){return Object(i.a)({url:"/api/project/"+e+"/cronJobList",method:"GET",headers:r,params:t})})(t.$route.params.project_id,e,{}).then(function(e){t.listLoading=!1;var r=e.status,o=e.data;"ok"===r?(t.totalNum=o.totalNum,t.cronJobs=o.rows):t.$message.error({message:o,center:!0})}).catch(function(e){t.$message.error({message:"定时任务列表获取失败，请稍后刷新重试哦~",center:!0}),t.listLoading=!1})},getCronJobList:function(){this.listLoading=!0;var e={size:this.size,skip:this.skip,sortBy:this.sortBy,order:this.order,projectId:this.$route.params.project_id};this.queryCronJobs(e)},handleSizeChange:function(e){this.size=e,this.listLoading=!0;var t={size:this.size,skip:this.skip,sortBy:this.sortBy,order:this.order,projectId:this.$route.params.project_id};this.queryCronJobs(t)},handleCurrentChange:function(e){this.skip=(e-1)*this.size,this.listLoading=!0;var t={size:this.size,skip:this.skip,sortBy:this.sortBy,order:this.order,projectId:this.$route.params.project_id};this.queryCronJobs(t)},handleDel:function(e,t){var r=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){r.listLoading=!0;var e=r;(function(e,t,r,o){return Object(i.a)({url:"/api/project/"+e+"/deleteCronJob/"+t,method:"POST",headers:o,data:r})})(r.$route.params.project_id,t._id,{},{}).then(function(t){var r=t.status,o=t.data;"ok"===r?e.$message.success({message:o,center:!0}):e.$message.error({message:o,center:!0}),e.getCronJobList()})})},selectsChange:function(e){e.length>0?(this.selects=e,this.update=!1):this.update=!0},stringToDate:function(e,t){t||(t="-");var r=e.toString().split(t),o=parseInt(r[0]),a=void 0;a=0==r[1].indexOf("0")?parseInt(r[1].substring(1)):parseInt(r[1]);var i=parseInt(r[2]);return new Date(o,a-1,i)},handleEdit:function(e,t){this.formVisible=!0,t.runDate&&t.runDate.constructor===String&&(t.runDate=this.stringToDate(t.runDate)),this.form=a()({},this.form,t),this.dialogStatus="edit"},handleAdd:function(){this.formVisible=!0,this.form=a()({},this.form,this.initForm),this.dialogStatus="add"},submit:function(){var e=this;this.$refs.form.validate(function(t){var r=e;if(t){if(r.form.enableWXWorkNotify&&!r.form.WXWorkAPIKey)return void r.$message.error({message:"企业微信APIKey不能为空！",center:!0});if(r.form.enableDingTalkNotify&&!r.form.DingTalkAccessToken)return void r.$message.error({message:"钉钉AccessToken不能为空！",center:!0});r.form.runDate&&""!==r.form.runDate.toString().trim()||r.form.interval&&""!==r.form.interval.toString().trim()?"date"===r.form.triggerType&&r.form.runDate<Date.now()?r.$message.warning({message:"人生不能重来哦 ~ 请输入「此刻」以后的日期",center:!0}):e.$confirm("确认提交吗？","提示",{}).then(function(){r.editLoading=!0;var t={"Content-Type":"application/json"};if("add"==e.dialogStatus){var o={name:r.form.name.trim(),testSuiteIdList:r.form.testSuiteIdList,testEnvId:r.form.testEnvId,includeForbidden:r.form.includeForbidden,triggerType:r.form.triggerType,description:r.form.description.trim(),enableWXWorkNotify:r.form.enableWXWorkNotify,WXWorkAPIKey:r.form.WXWorkAPIKey,WXWorkMentionMobileList:r.form.WXWorkMentionMobileList,alwaysWXWorkNotify:r.form.alwaysWXWorkNotify,enableDingTalkNotify:r.form.enableDingTalkNotify,DingTalkAccessToken:r.form.DingTalkAccessToken,DingTalkAtMobiles:r.form.DingTalkAtMobiles,DingTalkSecret:r.form.DingTalkSecret,alwaysDingTalkNotify:r.form.alwaysDingTalkNotify,alarmMailGroupList:r.form.alarmMailGroupList,alwaysSendMail:r.form.alwaysSendMail,createUser:r.$store.getters.email||"anonymous"};r.form.runDate&&""!==r.form.runDate.toString().trim()&&(o.runDate=r.form.runDate),r.form.interval&&""!==r.form.interval.toString().trim()&&(o.interval=Number(r.form.interval)),function(e,t,r){return Object(i.a)({url:"/api/project/"+e+"/addCronJob",method:"POST",headers:r,data:t})}(r.$route.params.project_id,o,t).then(function(e){r.editLoading=!1;var t=e.status,o=e.data;"ok"===t?(r.formVisible=!1,r.$message.success({message:"添加成功",center:!0}),r.$refs.form.resetFields(),r.formVisible=!1,r.getCronJobList()):(r.formVisible=!1,r.$message.error({message:o,center:!0}),r.$refs.form.resetFields(),r.formVisible=!1,r.getCronJobList())})}else if("edit"==e.dialogStatus){var a={name:r.form.name.trim(),testSuiteIdList:r.form.testSuiteIdList,testEnvId:r.form.testEnvId,includeForbidden:r.form.includeForbidden,triggerType:r.form.triggerType,description:r.form.description.trim(),enableWXWorkNotify:r.form.enableWXWorkNotify,WXWorkAPIKey:r.form.WXWorkAPIKey,WXWorkMentionMobileList:r.form.WXWorkMentionMobileList,alwaysWXWorkNotify:r.form.alwaysWXWorkNotify,enableDingTalkNotify:r.form.enableDingTalkNotify,DingTalkAccessToken:r.form.DingTalkAccessToken,DingTalkAtMobiles:r.form.DingTalkAtMobiles,DingTalkSecret:r.form.DingTalkSecret,alwaysDingTalkNotify:r.form.alwaysDingTalkNotify,alarmMailGroupList:r.form.alarmMailGroupList,alwaysSendMail:r.form.alwaysSendMail,lastUpdateUser:r.$store.getters.email||"anonymous"};r.form.runDate&&""!==r.form.runDate.toString().trim()&&(a.runDate=r.form.runDate),r.form.interval&&""!==r.form.interval.toString().trim()&&(a.interval=Number(r.form.interval)),function(e,t,r,o){return Object(i.a)({url:"/api/project/"+e+"/updateCronJob/"+t,method:"POST",headers:o,data:r})}(r.$route.params.project_id,r.form._id,a,t).then(function(e){r.editLoading=!1;var t=e.status,o=e.data;"ok"===t?(r.formVisible=!1,r.$message.success({message:"更新成功",center:!0}),r.$refs.form.resetFields(),r.formVisible=!1,r.getCronJobList()):(r.formVisible=!1,r.$message.error({message:o,center:!0}),r.$refs.form.resetFields(),r.formVisible=!1,r.getCronJobList())})}}):"interval"===r.form.triggerType?r.$message.warning({message:"请输入触发间隔",center:!0}):"date"===r.form.triggerType&&r.$message.warning({message:"请输入具体日期",center:!0})}})},sortChange:function(e){this.listLoading=!0,this.sortBy=e.prop,this.order=e.order;var t={size:this.size,skip:this.skip,sortBy:this.sortBy,order:this.order,projectId:this.$route.params.project_id};this.queryCronJobs(t)},handleChangeStatus:function(e,t){var r=this;r.statusChangeLoading=!0;var o={},a={updateUser:r.$store.getters.email};"PAUSED"!==t.status?function(e,t,r,o){return Object(i.a)({url:"/api/project/"+e+"/pauseCronJob/"+t,method:"POST",headers:o,data:r})}(r.$route.params.project_id,t._id,a,o).then(function(e){r.statusChangeLoading=!1;var t=e.status,o=e.data;"ok"===t?r.$message.success({message:o,center:!0}):r.$message.error({message:o,center:!0}),r.getCronJobList()}).catch(function(e){r.$message.error({message:"定时任务状态变更失败，请稍后刷新重试哦~",center:!0}),r.statusChangeLoading=!1}):function(e,t,r,o){return Object(i.a)({url:"/api/project/"+e+"/resumeCronJob/"+t,method:"POST",headers:o,data:r})}(r.$route.params.project_id,t._id,a,o).then(function(e){r.statusChangeLoading=!1;var t=e.status,o=e.data;"ok"===t?r.$message.success({message:o,center:!0}):r.$message.error({message:o,center:!0}),r.getCronJobList()}).catch(function(e){r.$message.error({message:"定时任务状态变更失败，请稍后刷新重试哦~",center:!0}),r.statusChangeLoading=!1,r.getCronJobList()})},triggerTypeChange:function(e){"interval"===e?this.form.runDate="":"date"===e&&(this.form.interval="")},reportRowStyle:function(e){var t=e.row;e.rowIndex;return"PAUSED"===t.status?"background-color: #DDDDDD":""},ReportTableRow:function(e){e.row,e.rowIndex;return"reportTableRow"}},created:function(){this.getTestEnvList(),this.getCronJobList(),this.getMailGroupList(),this.getTestSuiteList()}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticStyle:{margin:"10px 35px"}},[o("strong",{staticClass:"title"},[e._v(e._s(e.$route.meta.title))]),e._v(" "),o("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[o("el-form",{attrs:{inline:!0,model:e.filters},nativeOn:{submit:function(e){e.preventDefault()}}},[o("router-link",{staticStyle:{"text-decoration":"none",color:"aliceblue"},attrs:{to:""}},[o("el-button",{staticClass:"return-list",on:{click:function(t){return e.$router.back(-1)}}},[o("i",{staticClass:"el-icon-d-arrow-left",staticStyle:{"margin-right":"5px"}}),e._v("返回\n        ")])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-left":"35px"}},[o("el-button",{staticClass:"el-icon-plus",attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v(" 新增定时任务")])],1),e._v(" "),o("div",{staticStyle:{float:"right","margin-right":"100px"}},[o("el-form-item",[o("el-input",{attrs:{placeholder:"名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getCronJobList(t)}},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name","string"==typeof t?t.trim():t)},expression:"filters.name"}})],1),e._v(" "),o("el-form-item",[o("el-button",{staticClass:"el-icon-search",attrs:{type:"primary"},on:{click:e.getCronJobList}},[e._v(" 查询")])],1)],1)],1)],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"row-style":e.reportRowStyle,"row-class-name":e.ReportTableRow,data:e.cronJobs,"highlight-current-row":""},on:{"sort-change":e.sortChange,"selection-change":e.selectsChange}},[o("el-table-column",{attrs:{type:"selection","min-width":"5%"}}),e._v(" "),o("el-table-column",{attrs:{prop:"_id",label:"任务ID","min-width":"20%",sortable:"custom","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"name",label:"任务名称","min-width":"30%",sortable:"custom","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"description",label:"描述","min-width":"20%",sortable:"custom","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"createAt",label:"创建时间","min-width":"25%",sortable:"custom","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{sortable:"custom",prop:"createUser",label:"创建者","min-width":"15%","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"lastUpdateTime",label:"更新时间","min-width":"25%",sortable:"custom","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"lastUpdateUser",label:"更新者","min-width":"15%",sortable:"custom","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"next_run_time",label:"next执行时间","min-width":"25%",sortable:"custom","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"10%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("img",{directives:[{name:"show",rawName:"v-show",value:"PAUSED"!==t.row.status,expression:"scope.row.status!=='PAUSED'"}],attrs:{src:r("7shL")}}),e._v(" "),o("img",{directives:[{name:"show",rawName:"v-show",value:"PAUSED"===t.row.status,expression:"scope.row.status==='PAUSED'"}],attrs:{src:r("IT+J")}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作","min-width":"50%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(r){return e.handleDel(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),o("el-button",{attrs:{type:"info",size:"small",loading:e.statusChangeLoading},on:{click:function(r){return e.handleChangeStatus(t.$index,t.row)}}},[e._v("\n          "+e._s("PAUSED"===t.row.status?"启动":"停用")+"\n        ")])]}}])})],1),e._v(" "),o("el-dialog",{staticStyle:{width:"70%",left:"15%"},attrs:{title:e.titleMap[e.dialogStatus],visible:e.formVisible,width:"70%","close-on-click-modal":!1},on:{"update:visible":function(t){e.formVisible=t}}},[o("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"任务名称",prop:"name"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"用例组",prop:"testSuiteIdList"}},[o("el-select",{staticStyle:{width:"60%"},attrs:{clearable:"",multiple:"","auto-complete":"off"},on:{"visible-change":e.checkActiveTestSuite},model:{value:e.form.testSuiteIdList,callback:function(t){e.$set(e.form,"testSuiteIdList",t)},expression:"form.testSuiteIdList"}},e._l(e.testSuites,function(e,t){return o("el-option",{key:t+"",attrs:{label:e.name,value:e._id}})}),1),e._v(" "),o("el-checkbox",{staticStyle:{"margin-left":"50px"},attrs:{label:"是否执行禁用的用例(组)"},model:{value:e.form.includeForbidden,callback:function(t){e.$set(e.form,"includeForbidden",t)},expression:"form.includeForbidden"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"测试环境",prop:"testEnvId"}},[o("el-select",{attrs:{clearable:"","auto-complete":"off"},on:{"visible-change":e.checkActiveTestEnv},model:{value:e.form.testEnvId,callback:function(t){e.$set(e.form,"testEnvId",t)},expression:"form.testEnvId"}},e._l(e.testEnvs,function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e._id}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"触发类型",prop:"triggerType"}},[o("el-select",{attrs:{clearable:"","auto-complete":"off"},on:{change:e.triggerTypeChange},model:{value:e.form.triggerType,callback:function(t){e.$set(e.form,"triggerType","string"==typeof t?t.trim():t)},expression:"form.triggerType"}},e._l(e.TriggerTypes,function(e,t){return o("el-option",{key:t+"",attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),o("transition",{attrs:{name:"el-zoom-in-top"}},["interval"===e.form.triggerType.toString()||"date"===e.form.triggerType.toString()?o("div",{staticClass:"form-item-sub form-item-short"},["interval"===e.form.triggerType.toString()?o("el-form-item",{attrs:{label:"间隔/秒",prop:"interval"}},[o("el-input",{staticStyle:{width:"50%"},attrs:{type:"number","auto-complete":"off"},model:{value:e.form.interval,callback:function(t){e.$set(e.form,"interval","string"==typeof t?t.trim():t)},expression:"form.interval"}})],1):e._e(),e._v(" "),"date"===e.form.triggerType.toString()?o("el-form-item",{attrs:{label:"具体日期",prop:"runDate"}},[o("el-date-picker",{attrs:{"picker-options":e.pickerOptions,type:"datetime",placeholder:"请选择触发日期"},model:{value:e.form.runDate,callback:function(t){e.$set(e.form,"runDate","string"==typeof t?t.trim():t)},expression:"form.runDate"}})],1):e._e()],1):e._e()]),e._v(" "),o("div",{staticStyle:{border:"1px solid #e6e6e6","margin-bottom":"10px"}},[o("el-form-item",{attrs:{label:"企业微信通知","label-width":"120px",prop:"enableWXWorkNotify"}},[o("el-radio",{attrs:{label:!0},model:{value:e.form.enableWXWorkNotify,callback:function(t){e.$set(e.form,"enableWXWorkNotify",t)},expression:"form.enableWXWorkNotify"}},[e._v("是")]),e._v(" "),o("el-radio",{attrs:{label:!1},model:{value:e.form.enableWXWorkNotify,callback:function(t){e.$set(e.form,"enableWXWorkNotify",t)},expression:"form.enableWXWorkNotify"}},[e._v("否")])],1),e._v(" "),o("transition",{attrs:{name:"el-zoom-in-top"}},[e.form.enableWXWorkNotify?o("div",{staticClass:"form-item-sub form-item-short"},[o("el-form-item",{attrs:{label:"企业微信APIKey",prop:"WXWorkAPIKey"}},[o("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请填写企业微信群机器人WebhookAPIKey，如: 6789f5f7-736a-423b-b140-98d8324cb8cb","auto-complete":"off"},model:{value:e.form.WXWorkAPIKey,callback:function(t){e.$set(e.form,"WXWorkAPIKey","string"==typeof t?t.trim():t)},expression:"form.WXWorkAPIKey"}})],1),e._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.enableWXWorkNotify,expression:"form.enableWXWorkNotify"}],attrs:{label:"通知策略"}},[o("el-radio",{attrs:{label:!0},model:{value:e.form.alwaysWXWorkNotify,callback:function(t){e.$set(e.form,"alwaysWXWorkNotify",t)},expression:"form.alwaysWXWorkNotify"}},[e._v("执行成功也发送通知")]),e._v(" "),o("el-radio",{attrs:{label:!1},model:{value:e.form.alwaysWXWorkNotify,callback:function(t){e.$set(e.form,"alwaysWXWorkNotify",t)},expression:"form.alwaysWXWorkNotify"}},[e._v("执行失败才发送通知")])],1),e._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.enableWXWorkNotify,expression:"form.enableWXWorkNotify"}],attrs:{label:"提醒手机号列表"}},[o("el-select",{staticStyle:{width:"80%"},attrs:{multiple:"",clearable:"",filterable:"","default-first-option":"","allow-create":"",placeholder:"手机号列表，提醒手机号对应的群成员(@某个成员)，@all表示提醒所有人"},model:{value:e.form.WXWorkMentionMobileList,callback:function(t){e.$set(e.form,"WXWorkMentionMobileList","string"==typeof t?t.trim():t)},expression:"form.WXWorkMentionMobileList"}})],1)],1):e._e()]),e._v(" "),o("el-form-item",{attrs:{label:"钉钉通知","label-width":"120px",prop:"enableDingTalkNotify"}},[o("el-radio",{attrs:{label:!0},model:{value:e.form.enableDingTalkNotify,callback:function(t){e.$set(e.form,"enableDingTalkNotify",t)},expression:"form.enableDingTalkNotify"}},[e._v("是")]),e._v(" "),o("el-radio",{attrs:{label:!1},model:{value:e.form.enableDingTalkNotify,callback:function(t){e.$set(e.form,"enableDingTalkNotify",t)},expression:"form.enableDingTalkNotify"}},[e._v("否")])],1),e._v(" "),o("transition",{attrs:{name:"el-zoom-in-top"}},[e.form.enableDingTalkNotify?o("div",{staticClass:"form-item-sub form-item-short"},[o("el-form-item",{attrs:{"label-width":"120px",label:"AccessToken",prop:"DingTalkAccessToken"}},[o("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请填写钉钉群机器人DingTalkAccessToken","auto-complete":"off"},model:{value:e.form.DingTalkAccessToken,callback:function(t){e.$set(e.form,"DingTalkAccessToken","string"==typeof t?t.trim():t)},expression:"form.DingTalkAccessToken"}})],1),e._v(" "),o("el-form-item",{attrs:{"label-width":"120px",label:"钉钉加签密钥",prop:"DingTalkSecret"}},[o("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"钉钉机器人安全设置勾选加签后须填写Secret,如不勾选可不填","auto-complete":"off"},model:{value:e.form.DingTalkSecret,callback:function(t){e.$set(e.form,"DingTalkSecret","string"==typeof t?t.trim():t)},expression:"form.DingTalkSecret"}})],1),e._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.enableDingTalkNotify,expression:"form.enableDingTalkNotify"}],attrs:{"label-width":"120px",label:"通知策略"}},[o("el-radio",{attrs:{label:!0},model:{value:e.form.alwaysDingTalkNotify,callback:function(t){e.$set(e.form,"alwaysDingTalkNotify",t)},expression:"form.alwaysDingTalkNotify"}},[e._v("执行成功也发送通知")]),e._v(" "),o("el-radio",{attrs:{label:!1},model:{value:e.form.alwaysDingTalkNotify,callback:function(t){e.$set(e.form,"alwaysDingTalkNotify",t)},expression:"form.alwaysDingTalkNotify"}},[e._v("执行失败才发送通知")])],1),e._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.enableDingTalkNotify,expression:"form.enableDingTalkNotify"}],attrs:{"label-width":"120px",label:"提醒手机号列表"}},[o("el-select",{staticStyle:{width:"80%"},attrs:{multiple:"",clearable:"",filterable:"","default-first-option":"","allow-create":"",placeholder:"手机号列表，提醒手机号对应的群成员(@某个成员)，@all表示提醒所有人"},model:{value:e.form.DingTalkAtMobiles,callback:function(t){e.$set(e.form,"DingTalkAtMobiles","string"==typeof t?t.trim():t)},expression:"form.DingTalkAtMobiles"}})],1)],1):e._e()]),e._v(" "),o("el-form-item",{attrs:{label:"告警邮件组",prop:"alarmMailGroupList"}},[o("el-select",{staticStyle:{width:"60%"},attrs:{clearable:"",multiple:"",placeholder:"请选择告警报告接受者(可多选)"},on:{"visible-change":e.checkActiveMail},model:{value:e.form.alarmMailGroupList,callback:function(t){e.$set(e.form,"alarmMailGroupList",t)},expression:"form['alarmMailGroupList']"}},e._l(e.mailGroupList,function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e._id}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"触发邮件",prop:"alwaysSendMail"}},[o("el-radio-group",{model:{value:e.form.alwaysSendMail,callback:function(t){e.$set(e.form,"alwaysSendMail",t)},expression:"form['alwaysSendMail']"}},[o("el-radio",{attrs:{label:!0}},[e._v("执行成功也触发邮件")]),e._v(" "),o("el-radio",{attrs:{label:!1}},[e._v("执行失败才触发邮件")])],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"任务描述",prop:"description"}},[o("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submit(t)}}},[e._v("提交")])],1)],1),e._v(" "),o("el-col",{staticClass:"toolbar",attrs:{span:24}},[o("el-pagination",{staticStyle:{float:"right"},attrs:{"page-sizes":[10,20,40],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var f=r("VU/8")(m,c,!1,function(e){r("FEFL")},"data-v-2b63bcf4",null);t.default=f.exports}});
//# sourceMappingURL=27.28bcfdda59106d858743.js.map