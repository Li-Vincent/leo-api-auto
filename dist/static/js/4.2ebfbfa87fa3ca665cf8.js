webpackJsonp([4],{FrIa:function(t,e,n){"use strict";e.a=function(t,e){return Object(o.a)({url:"/api/project/"+t+"/testEnv/"+e,method:"GET"})};var o=n("cKc3")},MWv2:function(t,e){},yI7c:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("FrIa");var o=n("H9AI"),s=n("yNht"),a={name:"ShowDBEnvConnect",data:function(){return{dbConfigName:"",listLoading:!1,statusChangeLoading:!1,selects:[],testEnvs:[],dbConfig:{name:"",dbType:""},dbEnvConnects:[{testEnvId:"",testEnvName:"",dbHost:"",dbPort:"",dbUser:"",dbPassword:"",dbName:""}],loading:!1}},methods:{selectsChange:function(t){this.selects=t},reportRowStyle:function(t){var e=t.row;t.rowIndex;return!0!==e.status?"background-color: #FFF":""},ReportTableRow:function(t){t.row,t.rowIndex;return"reportTableRow"},getTestEnvList:function(){var t=this;Object(o.b)({},{}).then(function(e){var n=e.status,o=e.data;return"ok"===n?t.testEnvs=o.rows:t.$message.error({message:o,center:!0}),o.rows}).catch(function(e){t.$message.error({message:"环境列表获取失败，请稍后刷新重试哦~",center:!0})})},getDBConfigInfo:function(){var t=this;Object(s.b)(this.$route.params.db_config_id).then(function(e){var n=e.status,o=e.data;"ok"===n?t.dbConfig=o:t.$message.error({message:o,center:!0})}).catch(function(e){t.$message.error({message:"DB Config获取失败，请稍后刷新重试哦~",center:!0})})},getDBEnvConnects:function(){var t=this,e=this.testEnvs;this.dbEnvConnects=[];var n=function(n){var o=e[n],a={};a.testEnvId=o._id,a.testEnvName=o.name;var r={testEnvId:o._id,dbConfigId:t.$route.params.db_config_id};Object(s.d)(r,{"Content-Type":"application/json"}).then(function(e){var n=e.status,o=e.data;"ok"===n?o.dbHost&&(a.dbHost=o.dbHost,a.dbPort=o.dbPort,a.dbUser=o.dbUser,a.dbPassword=o.dbPassword,a.dbName=o.dbName):t.$message.error({message:o,center:!0})}).catch(function(e){t.$message.error({message:"DB连接获取失败，请稍后刷新重试哦~",center:!0})}),t.dbEnvConnects.push(a)};for(var o in e)n(o)}},watch:{testEnvs:{handler:function(t,e){this.getDBEnvConnects()},deep:!0}},created:function(){this.getTestEnvList(),this.getDBConfigInfo()}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("strong",{staticClass:"title"},[t._v(t._s(t.$route.meta.title)+" "),t.dbConfig.name?n("span",[t._v(" - DB: "+t._s(t.dbConfig.name))]):t._e()]),t._v(" "),n("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[n("el-form",{attrs:{inline:!0},nativeOn:{submit:function(t){t.preventDefault()}}},[n("router-link",{staticStyle:{"text-decoration":"none",color:"aliceblue"},attrs:{to:""}},[n("el-button",{staticClass:"return-list",on:{click:function(e){return t.$router.back(-1)}}},[n("i",{staticClass:"el-icon-d-arrow-left",staticStyle:{"margin-right":"5px"}}),t._v("返回\n        ")])],1),t._v(" "),n("el-form-item",{staticStyle:{float:"right","margin-right":"95px"}},[n("el-button",[t._v("*请点击列表中元素的空白处以刷新数据*")])],1)],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dbEnvConnects,"row-style":t.reportRowStyle,"row-class-name":t.ReportTableRow,"highlight-current-row":""},on:{"selection-change":t.selectsChange}},[n("el-table-column",{attrs:{type:"selection","min-width":"5%"}}),t._v(" "),n("el-table-column",{attrs:{prop:"testEnvName",label:"环境名称","min-width":"15%","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"dbType",label:"DB Type","min-width":"20%","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t.dbConfig.dbType?n("span",[t._v(t._s(t.dbConfig.dbType))]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"dbHost",label:"DB Host","min-width":"20%","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"dbPort",label:"DB Port","min-width":"20%","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"dbUser",label:"DB User","min-width":"20%","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"dbPassword",label:"DB Password","min-width":"20%","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"dbName",label:"Database Name","min-width":"20%","show-overflow-tooltip":""}})],1)],1)},staticRenderFns:[]};var i=n("VU/8")(a,r,!1,function(t){n("MWv2")},"data-v-2e12daef",null);e.default=i.exports}});
//# sourceMappingURL=4.2ebfbfa87fa3ca665cf8.js.map