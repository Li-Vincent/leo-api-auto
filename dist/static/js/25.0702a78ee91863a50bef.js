webpackJsonp([25],{MCyR:function(e,s,r){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=r("Xxa5"),o=r.n(a),t=r("exGp"),l=r.n(t),i=r("vMJZ"),n={name:"Register",data:function(){var e=this;return{changePwdLoading:!1,passwordType:"password",form:{email:this.$store.getters.email,oldPassword:"",password:"",password2:""},formRules:{oldPassword:[{required:!0,trigger:"blur"}],password:[{required:!0,validator:function(e,s,r){s?s.toString().length<6||s.toString().length>18?r(new Error("密码长度为6 - 18个字符")):r():r(new Error("请输入新密码"))},trigger:"blur"}],password2:[{required:!0,validator:function(s,r,a){r?r!==e.form.password?a(new Error("两次输入密码不一致!")):a():a(new Error("请再次输入密码"))},trigger:"blur"}]}}},methods:{showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick(function(){e.$refs.password.focus()})},submit:function(){var e=this;return l()(o.a.mark(function s(){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e.$refs.form.validate(function(s){if(s){var r={email:e.form.email,oldPassword:e.form.oldPassword,password:e.form.password};e.changePwdLoading=!0,Object(i.a)(r,{}).then(function(s){e.changePwdLoading=!1,"ok"===s.status?(e.$message({message:s.data,center:!0}),e.$store.dispatch("user/logout").then(function(s){e.$router.push({name:"login"})}).catch(function(){})):e.$message.error({message:s.data,center:!0})})}else e.$message.error({message:"表单验证失败",center:!0})});case 1:case"end":return s.stop()}},s,e)}))()}}},d={render:function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"leo-login"},[r("div",{staticClass:"leo-login-main"},[r("el-form",{ref:"form",staticClass:"login-form",attrs:{model:e.form,rules:e.formRules}},[r("el-row",{attrs:{type:"flex",justify:"center",gutter:10}},[r("el-col",[r("el-form-item",[r("div",{staticClass:"title"},[e._v("修改密码")])])],1)],1),e._v(" "),r("el-row",{attrs:{type:"flex",justify:"center",gutter:10}},[r("el-col",[r("el-form-item",{attrs:{label:"用户邮箱:","label-width":"83px",prop:"email"}},[r("el-input",{ref:"email",attrs:{name:"email",tabindex:"0",disabled:""},model:{value:e.form.email,callback:function(s){e.$set(e.form,"email",s)},expression:"form.email"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{type:"flex",justify:"center",gutter:10}},[r("el-col",[r("el-form-item",{attrs:{label:"旧密码:",prop:"oldPassword","label-width":"83px"}},[r("el-input",{key:e.passwordType,ref:"oldPassword",attrs:{type:e.passwordType,placeholder:"当前密码",name:"oldPassword",tabindex:"1"},model:{value:e.form.oldPassword,callback:function(s){e.$set(e.form,"oldPassword",s)},expression:"form.oldPassword"}},[r("i",{class:"password"===e.passwordType?"fa fa-eye-slash":"fa fa-eye",attrs:{slot:"suffix"},on:{click:e.showPwd},slot:"suffix"})])],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:10}},[r("el-col",[r("el-form-item",{attrs:{label:"新密码:",prop:"password","label-width":"83px"}},[r("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"新密码",name:"password",tabindex:"2"},model:{value:e.form.password,callback:function(s){e.$set(e.form,"password",s)},expression:"form.password"}},[r("i",{class:"password"===e.passwordType?"fa fa-eye-slash":"fa fa-eye",attrs:{slot:"suffix"},on:{click:e.showPwd},slot:"suffix"})])],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:10}},[r("el-col",[r("el-form-item",{attrs:{label:"确认密码:",prop:"password2","label-width":"83px"}},[r("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"确认密码",name:"password2",tabindex:"3"},model:{value:e.form.password2,callback:function(s){e.$set(e.form,"password2",s)},expression:"form.password2"}},[r("i",{class:"password"===e.passwordType?"fa fa-eye-slash":"fa fa-eye",attrs:{slot:"suffix"},on:{click:e.showPwd},slot:"suffix"})])],1)],1)],1),e._v(" "),r("el-button",{staticClass:"login-btn",attrs:{id:"login-checkout",loading:e.changePwdLoading,type:"primary"},on:{click:e.submit}},[e._v("提交\n      ")])],1)],1)])},staticRenderFns:[]};var p=r("VU/8")(n,d,!1,function(e){r("gmwR")},"data-v-0805a034",null);s.default=p.exports},gmwR:function(e,s){}});
//# sourceMappingURL=25.0702a78ee91863a50bef.js.map