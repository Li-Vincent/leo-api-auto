webpackJsonp([7],{KX5P:function(e,t,s){"use strict";t.a=function(e,t){return Object(a.a)({url:"/api/startAPITestByCase",method:"POST",headers:t,data:e})},t.b=function(e,t){return Object(a.a)({url:"/api/startAPITestBySuite",method:"POST",headers:t,data:e})};var a=s("cKc3")},dHtD:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Xxa5"),r=s.n(a),i=s("exGp"),o=s.n(i),n=s("T9gM"),l=s("cKc3");var u=s("pR/e"),c=s("H9AI"),d=s("KX5P"),p=s("PJh5"),m=s.n(p),v={name:"TestCaseList",data:function(){var e=this;return{testSuiteName:"",methodOptions:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"},{label:"OPTIONS",value:"OPTIONS"},{label:"PATCH",value:"PATCH"},{label:"HEAD",value:"HEAD"}],caseList:[],listLoading:!1,copyLoading:!1,testLoading:!1,statusChangeLoading:!1,delLoading:!1,pageInfoIndex:-1,size:10,skip:0,sortBy:"sequence",order:"ascending",currentPage:1,totalNum:0,testEnv:"",testEnvs:[],tempParams:{},hasSelected:!1,selects:[],testResultStatus:!1,result:{},tempParamVisible:!1,addFormVisible:!1,activeIndex:"",addForm:{name:"",description:"",requestMethod:"",route:"",service:""},addLoading:!1,addFormRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],requestMethod:[{required:!0,message:"请选择请求方法",trigger:"blur"}],route:[{required:!0,message:"请输入路由(如:/chat)",trigger:"blur"},{validator:function(t,s,a){""!=s&&null!=s?0==s.indexOf("/")?a():(a(new Error("请输入路由(如: /chat)")),e.$message.warning({message:"路由格式不正确!",center:!0})):a()},trigger:"blur"}],service:[{required:!1,message:"请输入服务名",trigger:"blur"}],description:[{required:!1,message:"请输入描述",trigger:"blur"},{max:1024,message:"不能超过1024个字符",trigger:"blur"}]},filters:{name:""}}},methods:{handleSelect:function(e,t){this.activeIndex=e},queryTestCases:function(e){var t=this;this.listLoading=!0,""!==t.filters.name.trim()&&(e.name=t.filters.name.trim());Object(n.f)(t.$route.params.project_id,t.$route.params.test_suite_id,e,{}).then(function(e){t.listLoading=!1;var s=e.status,a=e.data;"ok"===s?(t.totalNum=a.totalNum,t.caseList=a.rows):t.$message.error({message:a,center:!0})}).catch(function(e){t.$message.error({message:"接口用例列表获取失败，请稍后刷新重试哦~",center:!0}),t.listLoading=!1})},getTestCaseList:function(){var e=this;return o()(r.a.mark(function t(){var s,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a={size:(s=e).size,skip:s.skip,sortBy:s.sortBy,order:s.order,projectId:s.$route.params.project_id,testSuiteId:s.$route.params.test_suite_id},e.queryTestCases(a);case 3:case"end":return t.stop()}},t,e)}))()},showTempParams:function(){var e,t=this,s=this;(e=s.$route.params.test_suite_id,Object(l.a)({url:"/api/getTestSuiteTempParams/"+e,method:"GET"})).then(function(e){var a=e.status,r=e.data;"ok"===a?r.params?(s.tempParams.params=r.params,s.tempParams.expiresTime=m()(r.expires_time).format("YYYY-MM-DD HH:mm:ss"),t.tempParamVisible=!0):s.$message.warning({message:"当前用例组还没有设置临时变量",center:!0}):s.$message.error({message:r,center:!0})}).catch(function(e){console.log(e),s.$message.error({message:"用例组临时变量获取失败，请稍后重试哦~",center:!0})})},handleChangeStatus:function(e,t){var s=this,a=this;a.statusChangeLoading=!0;var r={status:!t.status};Object(n.g)(this.$route.params.project_id,this.$route.params.test_suite_id,t._id,r,{"Content-Type":"application/json"}).then(function(e){var s=e.status,r=e.data;a.statusChangeLoading=!1,"ok"==s?(a.$message({message:"状态变更成功",center:!0,type:"success"}),t.status=!t.status):a.$message.error({message:r,center:!0}),a.getTestCaseList()}).catch(function(){a.$message.error({message:"用例状态更新失败,请稍后重试哦",center:!0}),a.statusChangeLoading=!1,s.getTestCaseList()})},handleSizeChange:function(e){this.$store.dispatch("pageInfo/setTestCasePageInfo",{size:e,testSuiteId:this.$route.params.test_suite_id}),this.size=e,this.listLoading=!0;var t={size:this.size,skip:this.skip,sortBy:this.sortBy,order:this.order,projectId:this.$route.params.project_id,testSuiteId:this.$route.params.test_suite_id};this.queryTestCases(t)},handleCurrentChange:function(e){this.listLoading=!0,this.$store.dispatch("pageInfo/setTestCasePageInfo",{skip:(e-1)*this.size,currentPage:e,testSuiteId:this.$route.params.test_suite_id}),this.skip=(e-1)*this.size;var t={size:this.size,skip:this.skip,sortBy:this.sortBy,order:this.order,projectId:this.$route.params.project_id,testSuiteId:this.$route.params.test_suite_id};this.queryTestCases(t)},sortChange:function(e){this.listLoading=!0,this.sortBy=e.prop,this.order=e.order;var t={size:this.size,skip:this.skip,sortBy:this.sortBy,order:this.order,projectId:this.$route.params.project_id,testSuiteId:this.$route.params.test_suite_id};this.queryTestCases(t)},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){if(t){var s=e;e.$confirm("确认提交吗？","提示",{}).then(function(){s.addLoading=!0;var e={name:s.addForm.name.trim(),requestMethod:s.addForm.requestMethod,route:s.addForm.route,service:s.addForm.service,description:s.addForm.description.trim(),createUser:s.$store.getters.email};Object(n.a)(s.$route.params.project_id,s.$route.params.test_suite_id,e,{}).then(function(e){s.addLoading=!1;var t=e.status,a=e.data;"ok"===t?(s.$message.success({message:"保存成功",center:!0}),s.$refs.addForm.resetFields(),s.addFormVisible=!1,s.getTestCaseList()):s.$message.error({message:a,center:!0})}).catch(function(){s.$message.error({message:"新增接口用例失败,请稍后重试哦",center:!0}),s.addLoading=!1})})}})},checkSequence:function(e){return new RegExp("^[1-9][0-9]*$").test(e)},updateSequence:function(e,t){var s=this;this.$confirm("确认更新执行顺序吗?","提示",{type:"warning"}).then(function(){if(!s.checkSequence(t.sequence))return s.$message.error({message:"请输入正整数",center:!0}),void s.getTestCaseList();var e=s;e.listLoading=!0;var a={sequence:t.sequence};Object(n.g)(e.$route.params.project_id,e.$route.params.test_suite_id,t._id,a,{}).then(function(t){e.listLoading=!1;var s=t.status,a=t.data;"ok"===s?(e.$message.success({message:"更新执行顺序成功",center:!0}),e.getTestCaseList()):(e.$message.error({message:a,center:!0}),e.getTestCaseList())}).catch(function(){e.$message.error({message:"更新失败,请稍后重试哦",center:!0}),e.listLoading=!1})})},handleDel:function(e,t){var s=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){var e=s;e.delLoading=!0;Object(n.g)(e.$route.params.project_id,e.$route.params.test_suite_id,t._id,{isDeleted:!0},{}).then(function(t){e.delLoading=!1;var s=t.status,a=t.data;"ok"===s?(e.$message.success({message:"删除成功",center:!0}),e.getTestCaseList()):(e.$message.error({message:a,center:!0}),e.getTestCaseList())}).catch(function(){e.$message.error({message:"删除失败,请稍后重试哦",center:!0}),e.delLoading=!1})})},getTestEnvList:function(){var e=this,t=this;Object(c.b)({status:!0},{}).then(function(s){var a=s.status,r=s.data;"ok"===a?e.testEnvs=r.rows:t.$message.error({message:r,center:!0})}).catch(function(e){t.$message.error({message:"暂时无法获取环境列表，请稍后刷新重试~",center:!0})})},checkActiveTestEnv:function(){this.testEnvs.length<1&&this.$message.warning({message:"未找到「启用的测试环境」哦, 请前往「环境配置」进行设置",center:!0})},handleAdd:function(){this.addFormVisible=!0},reportRowStyle:function(e){var t=e.row;e.rowIndex;return!0!==t.status?"background-color: #DDDDDD":""},ReportTableRow:function(e){e.row,e.rowIndex;return"reportTableRow"},selectsChange:function(e){e.length>0?(this.selects=e,this.hasSelected=!0):this.hasSelected=!1},warmPrompt:function(){this.$router.history.current.params.showWarmPrompt&&this.$message.info({message:"测试用例默认按照「Sequence」和「创建时间」正序执行~",center:!0})},onTest:function(e,t){if(this.testEnv){t.testStatus=!0;var s=this;s.testLoading=!0;var a={testCaseIdList:[t._id],testEnvId:s.testEnv,executionUser:s.$store.getters.email,executionMode:"manual"};Object(d.a)(a,{"Content-Type":"application/json"}).then(function(e){s.testLoading=!1;var a=e.status,r=e.data;"ok"===a?(s.getTestCaseList(),t.testStatus=!1):s.$message.warning({message:r,center:!0}),s.getTestCaseList(),t.testStatus=!1}).catch(function(e){s.$message.error({message:"接口用例执行异常/超时，请稍后重试哦~",center:!0}),s.testLoading=!1,s.getTestCaseList(),t.testStatus=!1})}else this.$message({message:"请选择测试环境, 在测试按钮上方哦~",center:!0,type:"warning"})},batchTest:function(){if(this.testEnv){var e=this;e.testLoading=!0;var t={testCaseIdList:e.selects.map(function(e){return e._id}),testEnvId:e.testEnv,executionUser:e.$store.getters.email,executionMode:"manual"};Object(d.a)(t,{"Content-Type":"application/json"}).then(function(t){e.testLoading=!1;var s=t.status,a=t.data;"ok"===s?e.getTestCaseList():e.$message.warning({message:a,center:!0}),e.getTestCaseList()}).catch(function(t){e.$message.error({message:"接口用例执行异常/超时，请稍后重试哦~",center:!0}),e.testLoading=!1,e.getTestCaseList()})}else this.$message({message:"请选择测试环境, 在「批量测试」左侧哦~",center:!0,type:"warning"})},showResult:function(e){this.listLoading=!0,this.result.name=e.name,this.getResult(e._id)},getResult:function(e){var t=this,s=this;Object(n.e)(e).then(function(e){if("ok"===e.status){t.listLoading=!1;var a=e.data;s.result.env=a.env,s.result.url=a.testCaseDetail.url,s.result.requestMethod=a.testCaseDetail.requestMethod,s.result.delaySeconds=a.testCaseDetail.delaySeconds,a.testCaseDetail.filePath&&(s.result.filePath=a.testCaseDetail.filePath),a.dataInitResult&&a.dataInitResult.length>0&&a.dataInitResult.forEach(function(e){try{e.query&&"string"==typeof e.query&&(e.query=JSON.parse(e.query)),e.set&&"string"==typeof e.set&&(e.set=JSON.parse(e.set))}catch(e){console.log(e)}}),s.result.dataInitResult=a.dataInitResult,s.result.headers=a.headers,s.result.cookies=a.testCaseDetail.cookies,s.result.requestBody=a.testCaseDetail.requestBody,a.checkResponseCode?s.result.checkResponseCode=a.checkResponseCode:s.result.checkResponseCode="无",a.checkSpendSeconds?s.result.checkSpendSeconds=a.checkSpendSeconds+" s":s.result.checkSpendSeconds="无",!a.checkResponseBody||1===a.checkResponseBody.length&&""===a.checkResponseBody[0].regex.trim()?s.result.checkResponseBody="无":s.result.checkResponseBody=a.checkResponseBody,!a.checkResponseNumber||1===a.checkResponseNumber.length&&""===a.checkResponseNumber[0].expression.trim()?s.result.checkResponseNumber="无":s.result.checkResponseNumber=a.checkResponseNumber,s.result.result=a.status,s.result.responseStatusCode=a.responseStatusCode;try{s.result.responseData=JSON.parse(a.responseData)}catch(e){s.result.responseData=a.responseData}s.result.testConclusion=a.testConclusion,s.result.testStartTime=m()(a.testStartTime).format("YYYY年MM月DD日HH时mm分ss秒"),s.result.spendTimeInSec=a.spendTimeInSec,s.result.elapsedSeconds=a.elapsedSeconds,s.testResultStatus=!0}else s.$message.warning({message:e.data,center:!0})}).catch(function(e){s.$message.error({message:"用例执行结果获取失败，请稍后重试哦~",center:!0})})},copyCase:function(e,t){var s=this;this.$confirm("确认复制吗？","提示",{}).then(function(){s.copyLoading=!0;var e={createUser:s.$store.getters.email||"anonymous"};Object(n.b)(s.$route.params.project_id,s.$route.params.test_suite_id,t._id,e,{"Content-Type":"application/json"}).then(function(e){s.copyLoading=!1;var t=e.status,a=e.data;"ok"===t?s.$message.success({message:a,center:!0}):s.$message.error({message:a,center:!0}),s.getTestCaseList()}).catch(function(e){s.$message.error({message:"用例复制失败，请稍后重试哦~",center:!0}),s.copyLoading=!1})})}},mounted:function(){var e=this;this.getTestCaseList(),this.getTestEnvList(),Object(u.c)(this.$route.params.project_id,this.$route.params.test_suite_id).then(function(t){"ok"===t.status&&(e.testSuiteName=t.data.name)}),this.warmPrompt()},created:function(){var e=this;this.pageInfoIndex=this.$store.getters.testCasePageInfo.findIndex(function(t){return t.testSuiteId===e.$route.params.test_suite_id}),this.size=-1===this.pageInfoIndex?10:this.$store.getters.testCasePageInfo[this.pageInfoIndex]&&this.$store.getters.testCasePageInfo[this.pageInfoIndex].size||10,this.skip=-1===this.pageInfoIndex?0:this.$store.getters.testCasePageInfo[this.pageInfoIndex]&&this.$store.getters.testCasePageInfo[this.pageInfoIndex].skip||0,this.sortBy=-1===this.pageInfoIndex?"sequence":this.$store.getters.testCasePageInfo[this.pageInfoIndex]&&this.$store.getters.testCasePageInfo[this.pageInfoIndex].sortBy||"sequence",this.order=-1===this.pageInfoIndex?"ascending":this.$store.getters.testCasePageInfo[this.pageInfoIndex]&&this.$store.getters.testCasePageInfo[this.pageInfoIndex].order||"ascending",this.currentPage=-1===this.pageInfoIndex?1:this.$store.getters.testCasePageInfo[this.pageInfoIndex]&&this.$store.getters.testCasePageInfo[this.pageInfoIndex].currentPage||1}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("strong",{staticClass:"title"},[e._v(e._s(e.$route.meta.title)+" "),e.testSuiteName?a("span",[e._v(" - Suite: "+e._s(e.testSuiteName))]):e._e()]),e._v(" "),a("el-dialog",{staticStyle:{width:"75%",left:"12.5%"},attrs:{width:"80%",title:"新增",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[a("el-row",{attrs:{gutter:16}},[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"用例名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"服务名",prop:"service"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.service,callback:function(t){e.$set(e.addForm,"service","string"==typeof t?t.trim():t)},expression:"addForm.service"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"请求方法",prop:"requestMethod"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.requestMethod,callback:function(t){e.$set(e.addForm,"requestMethod",t)},expression:"addForm.requestMethod"}},e._l(e.methodOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"接口路由",prop:"route"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.route,callback:function(t){e.$set(e.addForm,"route","string"==typeof t?t.trim():t)},expression:"addForm.route"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea",rows:6},model:{value:e.addForm.description,callback:function(t){e.$set(e.addForm,"description",t)},expression:"addForm.description"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"临时变量",visible:e.tempParamVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.tempParamVisible=t}}},[a("el-tag",{attrs:{type:"warning"}},[e._v("变量失效时间："+e._s(e.tempParams.expiresTime))]),e._v(" "),a("el-table",{attrs:{data:e.tempParams.params}},[a("el-table-column",{attrs:{prop:"name",label:"参数名","min-width":"30%",sortable:"custom","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"value",label:"参数值",sortable:"custom","show-overflow-tooltip":""}})],1)],1),e._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("router-link",{staticStyle:{"text-decoration":"none",color:"aliceblue"},attrs:{to:{name:"TestSuiteList",params:{project_id:this.$route.params.project_id}}}},[a("el-button",{staticClass:"return-list"},[a("i",{staticClass:"el-icon-d-arrow-left",staticStyle:{"margin-right":"5px"},attrs:{"return-list":""}}),e._v("用例组列表\n        ")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"}},[a("el-button",{staticClass:"el-icon-plus",attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v(" 新建接口用例")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"}},[a("el-input",{attrs:{placeholder:"名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getTestCaseList(t)}},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name","string"==typeof t?t.trim():t)},expression:"filters.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary"},on:{click:e.getTestCaseList}},[e._v(" 查询")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"}},[a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary"},on:{click:e.showTempParams}},[e._v("查看临时变量")])],1),e._v(" "),a("el-form-item",{staticStyle:{float:"right","margin-right":"50px"}},[a("el-select",{staticStyle:{"margin-right":"20px"},attrs:{clearable:"",placeholder:"测试环境"},on:{"visible-change":e.checkActiveTestEnv},model:{value:e.testEnv,callback:function(t){e.testEnv=t},expression:"testEnv"}},e._l(e.testEnvs,function(e,t){return a("el-option",{key:t+"",attrs:{label:e.name,value:e._id}})}),1),e._v(" "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[e._v("执行顺序：批量测试完全按照勾选顺序执行")])]),e._v(" "),a("el-button",{staticClass:"el-icon-caret-right",attrs:{type:"primary",disabled:!e.hasSelected},on:{click:function(t){return e.batchTest()}}},[e._v(" 批量测试")])],1)],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.caseList,"row-style":e.reportRowStyle,"row-class-name":e.ReportTableRow,"highlight-current-row":""},on:{"sort-change":e.sortChange,"selection-change":e.selectsChange}},[a("el-table-column",{attrs:{type:"selection","min-width":"5%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"接口用例名称","min-width":"40%",sortable:"custom","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{staticStyle:{"text-decoration":"none",color:"#000000"},attrs:{to:{name:"EditTestCase",params:{test_case_id:t.row._id}}}},[e._v(e._s(t.row.name)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"route",label:"Request","min-width":"40%",sortable:"custom","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"HttpStatus"},[e._v(e._s(t.row.requestMethod))]),e._v(" "),a("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(t.row.route))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"用例描述","min-width":"20%","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.description))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"service",label:"Service","min-width":"20%","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.service))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sequence",label:"Sequence","min-width":"25%",sortable:"custom","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"70px"},attrs:{type:"number","auto-complete":"false"},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.updateSequence(t.$index,t.row)}},model:{value:t.row.sequence,callback:function(s){e.$set(t.row,"sequence",e._n(s))},expression:"scope.row.sequence"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"lastUpdateTime",label:"更新时间","min-width":"25%",sortable:"custom","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"result",label:"测试结果","min-width":"25%",sortable:"custom","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.hasOwnProperty("lastManualResult")||"ok"!=t.row.lastManualResult.status&&"failed"!=t.row.lastManualResult.status,expression:"!scope.row.hasOwnProperty('lastManualResult') || scope.row.lastManualResult.status!='ok'&&scope.row.lastManualResult.status!='failed'"}]},[e._v("尚无测试结果")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.row.lastManualResult&&"ok"===t.row.lastManualResult.status,expression:"scope.row.lastManualResult && scope.row.lastManualResult.status==='ok'"}],staticStyle:{color:"#11b95c",cursor:"pointer"},on:{click:function(s){return e.showResult(t.row)}}},[e._v("通过,查看详情")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.row.lastManualResult&&"failed"===t.row.lastManualResult.status,expression:"scope.row.lastManualResult && scope.row.lastManualResult.status==='failed'"}],staticStyle:{color:"#cc0000",cursor:"pointer"},on:{click:function(s){return e.showResult(t.row)}}},[e._v("失败,查看详情")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"20%",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{directives:[{name:"show",rawName:"v-show",value:t.row.status,expression:"scope.row.status"}],attrs:{src:s("7shL")}}),e._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:!t.row.status,expression:"!scope.row.status"}],attrs:{src:s("IT+J")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"80%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small",loading:e.testLoading},on:{click:function(s){return e.onTest(t.$index,t.row)}}},[e._v("测试\n        ")]),e._v(" "),a("el-button",{staticClass:"copyBtn",attrs:{size:"small",loading:e.copyLoading},on:{click:function(s){return e.copyCase(t.$index,t.row)}}},[e._v("复制\n        ")]),e._v(" "),a("el-button",{attrs:{type:"info",size:"small",loading:e.statusChangeLoading},on:{click:function(s){return e.handleChangeStatus(t.$index,t.row)}}},[e._v(" "+e._s(!1===t.row.status?"启用":"禁用")+"\n        ")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small",loading:e.delLoading},on:{click:function(s){return e.handleDel(t.$index,t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[0!=e.totalNum?a("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":e.currentPage,"page-sizes":[10,20,40],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}}):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:"测试结果",visible:e.testResultStatus,"close-on-click-modal":!1},on:{"update:visible":function(t){e.testResultStatus=t}}},[a("div",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[a("span",{staticStyle:{"font-size":"28px"}},[e._v("测试结果")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.result.name,expression:"result.name"}],staticStyle:{"font-size":"20px"}},[e._v(" - "+e._s(e.result.name))])]),e._v(" "),a("div",{staticClass:"test-result"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.result.env,expression:"result.env"}]},[e._v("测试环境 : "+e._s(e.result.env))]),e._v(" "),a("div",[e._v("请求地址 : "+e._s(e.result.url))]),e._v(" "),a("div",[e._v("请求方式 : "+e._s(e.result.requestMethod))]),e._v(" "),a("div",[e._v("请求开始时间 : "+e._s(e.result.testStartTime))]),e._v(" "),a("div",[e._v("延迟调用时间 : "+e._s(e.result.delaySeconds)+"s")]),e._v(" "),a("div",[e._v("请求所用时间 : "+e._s(e.result.elapsedSeconds)+"s")]),e._v(" "),a("div",[e._v("用例执行时间 : "+e._s(e.result.spendTimeInSec)+"s")]),e._v(" "),a("div",{staticClass:"divider-line"}),e._v(" "),a("div",{staticStyle:{"font-size":"25px"}},[e._v("数据初始化:")]),e._v(" "),e._l(e.result.dataInitResult,function(t,s){return a("div",[a("pre",[e._v(e._s(t))])])}),e._v(" "),!e.result.dataInitResult||e.result.dataInitResult&&Object.keys(e.result.dataInitResult).length<=0?a("div",[e._v("\n        (无需数据初始化)\n      ")]):e._e(),e._v(" "),a("div",{staticClass:"divider-line"}),e._v(" "),a("div",{staticStyle:{"font-size":"25px"}},[e._v("请求头部:")]),e._v(" "),e._l(e.result.headers,function(t,s){return a("div",{key:s},[e._v(e._s(s)+":  "+e._s(t))])}),e._v(" "),!e.result.headers||e.result.headers&&Object.keys(e.result.headers).length<=0?a("div",[e._v("\n        (无任何header)\n      ")]):e._e(),e._v(" "),a("div",{staticClass:"divider-line"}),e._v(" "),a("div",{staticStyle:{"font-size":"25px"}},[e._v("Cookies:")]),e._v(" "),e._l(e.result.cookies,function(t,s){return a("div",[e._v(e._s(t.name)+" = "+e._s(t.value))])}),e._v(" "),!e.result.cookies||e.result.cookies&&e.result.cookies.length<=0?a("div",[e._v("(无任何Cookie)\n      ")]):e._e(),e._v(" "),a("div",{staticClass:"divider-line"}),e._v(" "),a("div",{staticStyle:{"font-size":"25px"}},[e._v("请求参数:")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.result.filePath,expression:"result.filePath"}]},[e._v("FilePath:  "+e._s(e.result.filePath))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.result.requestBody,expression:"result.requestBody"}],staticClass:"resultStyle resultData"},[a("pre",[e._v(e._s(e.result.requestBody))])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.result.requestBody,expression:"!result.requestBody"}],staticClass:"resultStyle resultData"},[e._v("无")]),e._v(" "),a("div",{staticClass:"divider-line"}),e._v(" "),a("div",{staticStyle:{"font-size":"25px"}},[e._v("预期结果:")]),e._v(" "),a("div",[e._v("HTTP状态码: "+e._s(e.result.checkResponseCode))]),e._v(" "),a("div",[e._v("请求耗时: "+e._s(e.result.checkSpendSeconds))]),e._v(" "),a("div",[e._v("JSON正则校验:\n        "),a("pre",[e._v(e._s(e.result.checkResponseBody))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.result.checkResponseBody,expression:"!result.checkResponseBody"}]},[e._v("(无)")])]),e._v(" "),a("div",[e._v("数值校验:\n        "),a("pre",[e._v(e._s(e.result.checkResponseNumber))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.result.checkResponseNumber,expression:"!result.checkResponseNumber"}]},[e._v("(无)")])]),e._v(" "),a("div",{staticClass:"divider-line"}),e._v(" "),a("div",{staticStyle:{"font-size":"25px"}},[e._v("实际结果:")]),e._v(" "),a("div",[e._v("HTTP状态码: "+e._s(e.result.responseStatusCode))]),e._v(" "),a("div",[e._v("请求耗时: "+e._s(e.result.elapsedSeconds)+"s")]),e._v(" "),a("div",[e._v("实际返回内容:")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.result.responseData,expression:"result.responseData"}],staticClass:"resultStyle resultData"},[a("pre",[e._v(e._s(e.result.responseData))])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.result.responseData,expression:"!result.responseData"}],staticClass:"resultStyle resultData"},[e._v("(无返回内容)")]),e._v(" "),a("div",{staticClass:"divider-line"}),e._v(" "),a("div",{staticStyle:{"font-size":"25px"}},[e._v("测试结论:")]),e._v(" "),e._l(e.result.testConclusion,function(t,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.result.testConclusion,expression:"result.testConclusion"}],key:s,staticStyle:{overflow:"auto","overflow-x":"hidden",border:"1px solid #e6e6e6",padding:"10px",width:"88%","word-break":"break-all","line-height":"25px"}},[e._v("\n        结论："+e._s(t.resultType)+" "),a("br"),e._v("\n        原因："+e._s(t.reason)+"\n      ")])}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.result.testConclusion,expression:"!result.testConclusion"}],staticStyle:{overflow:"auto","overflow-x":"hidden",border:"1px solid #e6e6e6",padding:"10px",width:"90%","word-break":"break-all","line-height":"25px","text-align":"center"}},[e._v("\n        无测试结论\n      ")])],2)])],1)},staticRenderFns:[]};var g=s("VU/8")(v,h,!1,function(e){s("unA0")},"data-v-1c6fdcdd",null);t.default=g.exports},unA0:function(e,t){}});
//# sourceMappingURL=7.0ff48479f19f25ce7674.js.map