webpackJsonp([4],{"0BKK":function(t,e){},FrIa:function(t,e,o){"use strict";e.a=function(t,e){return Object(n.a)({url:"/api/project/"+t+"/testEnv/"+e,method:"GET"})};var n=o("cKc3")},yI7c:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o("FrIa");var n=o("H9AI"),s=o("yNht"),a={name:"ShowDBEnvConnect",data:function(){return{dbConfigName:"",listLoading:!1,statusChangeLoading:!1,selects:[],testEnvs:[],dbConfig:{name:"",dbType:""},dbEnvConnects:[{testEnvId:"",testEnvName:"",dbHost:"",dbPort:"",dbUser:"",dbPassword:"",dbName:""}],loading:!1}},methods:{selectsChange:function(t){this.selects=t},reportRowStyle:function(t){var e=t.row;t.rowIndex;return!0!==e.status?"background-color: #FFF":""},ReportTableRow:function(t){t.row,t.rowIndex;return"reportTableRow"},getTestEnvList:function(){var t=this;Object(n.b)({},{}).then(function(e){var o=e.status,n=e.data;return"ok"===o?t.testEnvs=n.rows:t.$message.error({message:n,center:!0}),n.rows}).catch(function(e){t.$message.error({message:"环境列表获取失败，请稍后刷新重试哦~",center:!0})})},getDBConfigInfo:function(){var t=this;Object(s.b)(this.$route.params.db_config_id).then(function(e){var o=e.status,n=e.data;"ok"===o?t.dbConfig=n:t.$message.error({message:n,center:!0})}).catch(function(e){t.$message.error({message:"DB Config获取失败，请稍后刷新重试哦~",center:!0})})},getDBEnvConnects:function(){var t=this,e=this.testEnvs;this.dbEnvConnects=[];var o=function(o){var n=e[o],a={};a.testEnvId=n._id,a.testEnvName=n.name;var r={testEnvId:n._id,dbConfigId:t.$route.params.db_config_id};Object(s.d)(r,{"Content-Type":"application/json"}).then(function(e){var o=e.status,n=e.data;"ok"===o?n.dbHost&&(a.dbHost=n.dbHost,a.dbPort=n.dbPort,a.dbUser=n.dbUser,a.dbPassword=n.dbPassword,a.dbName=n.dbName):t.$message.error({message:n,center:!0})}).catch(function(e){t.$message.error({message:"DB连接获取失败，请稍后刷新重试哦~",center:!0})}),t.dbEnvConnects.push(a)};for(var n in e)o(n)}},watch:{testEnvs:{handler:function(t,e){this.getDBEnvConnects()},deep:!0}},created:function(){this.getTestEnvList(),this.getDBConfigInfo()}},r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",[o("strong",{staticClass:"title"},[t._v(t._s(t.$route.meta.title)+" "),t.dbConfig.name?o("span",[t._v(" - DB: "+t._s(t.dbConfig.name))]):t._e()]),t._v(" "),o("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[o("el-form",{attrs:{inline:!0},nativeOn:{submit:function(t){t.preventDefault()}}},[o("router-link",{staticStyle:{"text-decoration":"none",color:"aliceblue"},attrs:{to:""}},[o("el-button",{staticClass:"return-list",on:{click:function(e){return t.$router.back(-1)}}},[o("i",{staticClass:"el-icon-d-arrow-left",staticStyle:{"margin-right":"5px"}}),t._v("返回\n        ")])],1),t._v(" "),o("el-form-item",{staticStyle:{float:"right","margin-right":"95px"}},[o("el-button",[t._v("*请点击列表中元素的空白处以刷新数据*")])],1)],1)],1),t._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dbEnvConnects,"row-style":t.reportRowStyle,"row-class-name":t.ReportTableRow,"highlight-current-row":""},on:{"selection-change":t.selectsChange}},[o("el-table-column",{attrs:{type:"selection","min-width":"5%"}}),t._v(" "),o("el-table-column",{attrs:{prop:"testEnvName",label:"环境名称","min-width":"15%","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"dbType",label:"DB Type","min-width":"20%","show-overflow-tooltip":""}},[[t.dbConfig.dbType?o("span",[t._v(t._s(t.dbConfig.dbType))]):t._e()]],2),t._v(" "),o("el-table-column",{attrs:{prop:"dbHost",label:"DB Host","min-width":"20%","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"dbPort",label:"DB Port","min-width":"20%","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"dbUser",label:"DB User","min-width":"20%","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"dbPassword",label:"DB Password","min-width":"20%","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"dbName",label:"Database Name","min-width":"20%","show-overflow-tooltip":""}})],1)],1)},staticRenderFns:[]};var i=o("VU/8")(a,r,!1,function(t){o("0BKK")},"data-v-676a1282",null);e.default=i.exports}});
//# sourceMappingURL=4.2449a4b5f0a0cb433721.js.map